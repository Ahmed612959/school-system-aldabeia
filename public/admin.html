<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <title>لوحة تحكم الأدمن - معهد رعاية الضبعية</title>
    <link rel="stylesheet" href="admin.css">
    <script defer src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7676282531413677"
     crossorigin="anonymous"></script>
    <style>
    /* الهامبرجر منيو + القايمة الجانبية - تصميم فخم جدًا */
    .hamburger{
        position:fixed;top:18px;left:18px;z-index:9999;
        background:#d4af37;color:#000;padding:12px 16px;border-radius:50%;
        font-size:1.6rem;cursor:pointer;box-shadow:0 6px 20px rgba(212,175,55,0.6);
        border:none;transition:all 0.4s;font-weight:900;
    }
    .hamburger:hover{background:#ffc107;transform:rotate(90deg) scale(1.1);}

    .sidebar{
        position:fixed;top:0;right:-340px;width:340px;height:100%;background:#1a2526;
        box-shadow:-15px 0 40px rgba(0,0,0,0.8);transition:right 0.5s ease;z-index:9998;
        padding:25px;overflow-y:auto;border-left:6px solid #d4af37;
    }
    .sidebar.active{right:0;}

    .sidebar-header{
        text-align:center;padding:25px 0;border-bottom:3px solid #d4af37;margin-bottom:25px;
    }
    .sidebar-header h2{color:#d4af37;font-size:1.8rem;font-weight:900;}

    .sidebar-menu a{
        display:block;padding:20px 25px;color:#fff;font-size:1.4rem;
        border-bottom:1px solid #333333;transition:0.3s;border-radius:12px;
        margin:10px 15px;background:rgba(255,255,255,0.05);
    }
    .sidebar-menu a:hover{
        background:#d4af37;color:#000;font-weight:900;transform:translateX(-10px);
    }
    .sidebar-menu a i{margin-left:15px;}

    .overlay{
        position:fixed;inset:0;background:rgba(0,0,0,0.8);opacity:0;
        visibility:hidden;transition:0.4s;z-index:9997;
    }
    .overlay.active{opacity:1;visibility:visible;}

    @media (max-width:480px){
        .sidebar{width:300px;right:-300px;}
        .hamburger{top:12px;left:12px;font-size:1.4rem;padding:10px;}
    }
</style>
</head>
<body>
    <!-- الهامبرجر منيو -->
<button class="hamburger" id="hamburgerBtn">☰</button>

<!-- القايمة الجانبية -->
<div class="sidebar" id="adminSidebar">
    <div class="sidebar-header">
        <h2>قائمة الأدمن</h2>
    </div>
    <div class="sidebar-menu">
        <a href="admin.html"><i class="fas fa-tachometer-alt"></i> لوحة التحكم الرئيسية</a>
        <a href="certificate.html"><i class="fas fa-certificate"></i> إصدار شهادة تقدير</a>
        <a href="exams.html"><i class="fas fa-file-alt"></i> إدارة الامتحانات</a>
        <a href="notifications.html"><i class="fas fa-bell"></i> إرسال إشعارات</a>
        <a href="Home.html"><i class="fas fa-home"></i> الصفحة الرئيسية</a>
        <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> تسجيل الخروج</a>
    </div>
</div>

<!-- الخلفية الداكنة -->
<div class="overlay" id="overlay"></div>
    <header class="main-header">
        <img src="logo.png" alt="شعار معهد رعاية الضبعية" class="logo">
        <h1>لوحة تحكم الأدمن</h1>
        <div class="header-buttons">
            <button class="home-btn" onclick="window.location.href='Home.html'"><i class="fas fa-home"></i> الصفحة الرئيسية</button>
            <button class="logout-btn" onclick="logout()">تسجيل الخروج</button>
        </div>
    </header>

    <div class="admin-container">
        <div class="admin-welcome-message"></div>
        
        <h2>إدارة المستخدمين</h2>
        <div class="manage-users-section">
            <h3>إضافة أدمن جديد</h3>
            <form id="add-user-form">
                <div class="input-group">
                    <label for="admin-name">الاسم الكامل</label>
                    <input type="text" id="admin-name" name="admin-name" placeholder="أدخل الاسم الكامل">
                </div>
                <div class="input-group">
                    <label for="admin-username">اسم المستخدم</label>
                    <input type="text" id="admin-username" name="admin-username" placeholder="أدخل اسم المستخدم">
                </div>
                <div class="input-group">
                    <label for="admin-password">كلمة المرور</label>
                    <input type="password" id="admin-password" name="admin-password" placeholder="أدخل كلمة المرور">
                </div>
                <button type="submit" class="submit-btn">إضافة أدمن</button>
            </form>

            <h3>قائمة الأدمنز</h3>
            <div class="users-table">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>الاسم الكامل</th>
                                <th>اسم المستخدم</th>
                                <th>إجراء</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="upload-section">
    <h2>رفع وتحليل نتائج من ملف (PDF أو صورة)</h2>
    <p>1. اختر ملف PDF يحتوي على بيانات الطلاب (تنسيق: طالب: [اسم] - رقم الجلوس: [رقم], [مادة]: [درجة]).</p>
    <input type="file" id="pdf-upload" accept=".pdf">
    <button id="analyze-pdf" class="submit-btn">تحليل PDF</button>
    <div id="results-display" class="results-table"></div>
</div>

        <h2>إضافة نتيجة طالب يدويًا</h2>
<div class="add-result-section">
    <form id="add-result-form">
        <div class="input-group">
            <label for="student-name">اسم الطالب</label>
            <input type="text" id="student-name" name="student-name" placeholder="أدخل اسم الطالب">
        </div>
        <div class="input-group">
            <label for="student-id">رقم الجلوس</label>
            <input type="text" id="student-id" name="student-id" placeholder="أدخل رقم الجلوس">
        </div>
        <div class="input-group">
            <label for="semester">الترم</label>
            <select id="semester" name="semester" onchange="toggleSubjects()">
                <option value="first">الترم الأول</option>
                <option value="second">الترم الثاني</option>
            </select>
        </div>
        <div class="input-group">
            <label for="subject1">مبادئ وأسس تمريض</label>
            <input type="number" id="subject1" name="subject1" min="0" max="100" placeholder="أدخل الدرجة">
        </div>
        <div class="input-group">
            <label for="subject2">اللغة العربية</label>
            <input type="number" id="subject2" name="subject2" min="0" max="100" placeholder="أدخل الدرجة">
        </div>
        <div class="input-group">
            <label for="subject3">اللغة الإنجليزية</label>
            <input type="number" id="subject3" name="subject3" min="0" max="100" placeholder="أدخل الدرجة">
        </div>
        <div class="input-group">
            <label for="subject4">الفيزياء</label>
            <input type="number" id="subject4" name="subject4" min="0" max="100" placeholder="أدخل الدرجة">
        </div>
        <div class="input-group">
            <label for="subject5">الكيمياء</label>
            <input type="number" id="subject5" name="subject5" min="0" max="100" placeholder="أدخل الدرجة">
        </div>
        <div class="input-group">
            <label for="subject6">التشريح / علم وظائف الأعضاء</label>
            <input type="number" id="subject6" name="subject6" min="0" max="100" placeholder="أدخل الدرجة">
        </div>
        <div class="input-group">
            <label for="subject7">التربية الدينية</label>
            <input type="number" id="subject7" name="subject7" min="0" max="100" placeholder="أدخل الدرجة">
        </div>
        <div class="input-group">
            <label for="subject8">الكمبيوتر</label>
            <input type="number" id="subject8" name="subject8" min="0" max="100" placeholder="أدخل الدرجة">
        </div>
        <div class="input-group" id="history-group">
            <label for="subject9">التاريخ</label>
            <input type="number" id="subject9" name="subject9" min="0" max="100" placeholder="أدخل الدرجة">
        </div>
        <div class="input-group" id="geography-group" style="display: none;">
            <label for="subject10">الجغرافيا</label>
            <input type="number" id="subject10" name="subject10" min="0" max="100" placeholder="أدخل الدرجة">
        </div>
        <button type="submit" class="submit-btn">إضافة النتيجة</button>
    </form>
</div>

        <h2>قائمة النتايج</h2>
        <div class="filter-section" style="text-align: center; margin-bottom: 15px;">
            <label for="filter-select">عرض النتائج:</label>
            <select id="filter-select" class="search-bar" style="width:auto;">
                <option value="all">الكل</option>
                <option value="passed">الناجحين فقط</option>
                <option value="failed">الراسبين فقط</option>
            </select>
        </div>
        
        <div class="search-section">
            <input type="text" id="search-input" class="search-bar" placeholder="ابحث باسم الطالب أو رقم الجلوس">
        </div>
        <div class="results-table">
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>البيانات</th>
                            <th>القيم</th>
                            <th>المجموع</th>
                            <th>النسبة</th>
                            <th>الإجراء</th>
                        </tr>
                    </thead>
                    <tbody id="results-table-body"></tbody>
                </table>
            </div>
        </div>
        <button id="export-excel" class="submit-btn">تصدير النتائج إلى Excel</button>
        <section class="violations-section">
    <h2>إدارة الإنذارات والمخالفات</h2>
    <form id="add-violation-form">
        <div class="input-group">
            <label for="violation-student-id">رقم الجلوس</label>
            <input type="text" id="violation-student-id" required>
        </div>
        <div class="input-group">
            <label for="violation-type">النوع</label>
            <select id="violation-type" required>
                <option value="warning">إنذار</option>
                <option value="violation">مخالفة</option>
            </select>
        </div>
        <div class="input-group">
            <label for="violation-reason">السبب</label>
            <textarea id="violation-reason" required></textarea>
        </div>
        <div class="input-group">
            <label for="violation-penalty">العقوبة</label>
            <input type="text" id="violation-penalty" required>
        </div>
        <div class="input-group">
            <label for="parent-summons">
                <input type="checkbox" id="parent-summons"> استدعاء ولي الأمر
            </label>
        </div>
        <button type="submit" class="submit-btn">إضافة إنذار/مخالفة</button>
    </form>

    <h3>قائمة الإنذارات والمخالفات</h3>
    <div class="violations-table">
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>رقم الجلوس</th>
                        <th>النوع</th>
                        <th>السبب</th>
                        <th>العقوبة</th>
                        <th>استدعاء ولي الأمر</th>
                        <th>تاريخ الإضافة</th>
                        <th>الإجراء</th>
                    </tr>
                </thead>
                <tbody id="violations-table-body"></tbody>
            </table>
        </div>
    </div>
</section>

        <h2>إحصائيات</h2>
        <div class="stats-section" id="stats-section"></div>
       <!-- قسم إنشاء الاختبارات الإلكترونية -->
<section class="exams-section">
    <h2>إنشاء اختبار إلكتروني</h2>
    <div class="exam-form-container">
        <div class="input-group">
            <label for="exam-name">اسم الاختبار <span class="required">*</span></label>
            <input type="text" id="exam-name" placeholder="أدخل اسم الاختبار" required>
        </div>
        <div class="input-group">
            <label for="exam-code">كود الاختبار <span class="required">*</span></label>
            <input type="text" id="exam-code" placeholder="أدخل كود الاختبار (مثل EXAM123)" required>
            <span id="code-availability" style="display: none;"></span>
        </div>
        <div class="input-group">
            <label for="exam-stage">المرحلة</label>
            <select id="exam-stage">
                <option value="first">الأولى ثانوي</option>
                <option value="second">الثانية ثانوي</option>
            </select>
        </div>
        <div class="input-group">
    <label for="exam-duration">مدة الاختبار (بالدقائق) <span class="required">*</span></label>
    <input type="number" id="exam-duration" min="1" placeholder="أدخل مدة الاختبار (مثال: 30)" required>
</div>
        <div class="question-form">
            <h3>إضافة سؤال</h3>
            <div class="input-group">
                <label for="question-type">نوع السؤال</label>
                <select id="question-type">
                    <option value="multiple">اختياري</option>
                    <option value="essay">مقالي</option>
                    <option value="list">قائمة</option>
                    <option value="truefalse">صح/خطأ</option>
                </select>
            </div>
            <div id="question-inputs"></div>
            <button id="add-question" class="submit-btn">إضافة السؤال</button>
        </div>
        <div id="questions-list"></div>
        <button id="save-exam" class="submit-btn">حفظ الاختبار</button>
    </div>
</section>
        <div class="test-results-section">
    <h2>نتائج الاختبارات</h2>
    <div class="input-group">
        <label for="results-exam-code">كود الاختبار</label>
        <input type="text" id="results-exam-code" placeholder="أدخل كود الاختبار">
    </div>
    <button id="fetch-results" class="submit-btn">عرض النتائج</button>
    <div id="exam-results-list" class="test-results-table"></div>
</div>
        <!-- إضافة هذا القسم بعد <div id="stats-section" class="stats-section"></div> -->
<div class="notifications-section">
    <h2>إدارة الإشعارات</h2>
    <div class="input-group">
        <label for="notification-text">نص الإشعار</label>
        <textarea id="notification-text" rows="4" placeholder="أدخل نص الإشعار"></textarea>
    </div>
    <button class="submit-btn" onclick="addNotification()">إضافة إشعار</button>
    <div id="notifications-list" class="notifications-list">
        <h3>قائمة الإشعارات</h3>
        <div id="notifications-table" class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>نص الإشعار</th>
                        <th>تاريخ الإضافة</th>
                        <th>إجراء</th>
                    </tr>
                </thead>
                <tbody id="notifications-table-body"></tbody>
            </table>
        </div>
    </div>
</div>
    </div>

    <nav class="nav-bar" id="nav-bar"></nav>

    <button class="scroll-btn scroll-up" onclick="scrollToTop()"><i class="fas fa-arrow-up"></i></button>
    <button class="scroll-btn scroll-down" onclick="scrollToBottom()"><i class="fas fa-arrow-down"></i></button>



    
    <!-- أضف هذين السطرين فقط -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="admin.js"></script>
    <script src="auth.js"></script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'947cc960f9459a73',t:'MTc0ODU5Mjk1Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
// الهامبرجر منيو - فتح وإغلاق
document.getElementById('hamburgerBtn').addEventListener('click', function() {
    document.getElementById('adminSidebar').classList.toggle('active');
    document.getElementById('overlay').classList.toggle('active');
});

document.getElementById('overlay').addEventListener('click', function() {
    document.getElementById('adminSidebar').classList.remove('active');
    document.getElementById('overlay').classList.remove('active');
});

// إغلاق القايمة لما نضغط على لينك (خصوصًا على الموبايل)
document.querySelectorAll('.sidebar-menu a').forEach(link => {
    link.addEventListener('click', () => {
        if (window.innerWidth <= 768) {
            document.getElementById('adminSidebar').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        }
    });
});
</script>
</body>
</html>
